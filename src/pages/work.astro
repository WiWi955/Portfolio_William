---
import { getCollection } from 'astro:content';
import BaseLayout from '../layouts/BaseLayout.astro';
import ContactCTA from '../components/ContactCTA.astro';
import PortfolioPreview from '../components/PortfolioPreview.astro';
import Hero from '../components/Hero.astro';
import Grid from '../components/Grid.astro';

// Récupérer les projets triés par date de publication
const projects = (await getCollection('work')).sort(
	(a, b) => b.data.publishDate.valueOf() - a.data.publishDate.valueOf(),
);
---

<BaseLayout
	title="Mon Projet | William NGUYEN"
	description="Découvrez les projets récents de William NGUYEN, alternant en informatique spécialisé en systèmes, réseaux et cloud."
>
	<!-- Formulaire de mot de passe -->
	<div id="password-protected" class="password-protected">
		<form id="password-form">
			<label for="password">Entrez le mot de passe :</label>
			<input type="password" id="password" name="password" required />
			<button type="submit">Accéder</button>
		</form>
	</div>

	<!-- Contenu masqué initialement -->
	<div id="content" class="hidden">
		<div class="stack gap-20">
			<main class="wrapper stack gap-8">
				<Hero
					title="Mon Projet"
					tagline="Projet LPRS"
					align="start"
				/>

				<!-- Section dédiée au projet de groupe -->
				<section class="project-context">
					<h2>Projet de groupe : Refonte de l'infrastructure réseau d'une école</h2>
					<p>
						Dans le cadre de ma formation, j'ai participé à un projet de groupe consistant à refaire l'infrastructure réseau d'une école. Ce projet, réalisé en équipe de 4 personnes, comprenait plusieurs missions techniques clés :
					</p>
					<ul>
						<li><strong>Mission 1 :</strong> Installation d'un serveur Windows 2022 (ou serveur Windows 2019 si migration prévue).</li>
						<li><strong>Mission 2 :</strong> Câblage et test des ping avec les serveurs HyperV.</li>
						<li><strong>Mission 3 :</strong> Installation du contrôleur de domaine secondaire Active Directory, DNS.</li>
						<li><strong>Mission 4 :</strong> Création des utilisateurs et groupes. Test avec un client.</li>
						<li><strong>Mission 5 :</strong> Paramétrage des points d'accès sans fil avec test des clients wifi.</li>
						<li><strong>Mission 6 :</strong> Installation et configuration d'un modem pour ouvrir le trafic Internet vers le LAN à partir d’une ligne ADSL.</li>
						<li><strong>Mission 7 :</strong> Installation d’un serveur proxy (exemples : Pfsense, Haproxy, Cisco router ou autre solution technique).</li>
						<li><strong>Mission 8 :</strong> Création de la zone DMZ.</li>
						<li><strong>Mission 9 :</strong> Installation et paramétrage d'un logiciel de gestion des incidents et d'inventaire (exemple GLPI).</li>
						<li><strong>Mission 10 :</strong> Installation et paramétrage d'un système de supervision des services réseaux et les ressources des serveurs (exemple PRTG, Zabbix, Nagios/CentOS).</li>
						<li><strong>Mission 11 :</strong> Installation et configuration d’un outil collaboratif (Zimbra, Exchange, Bluemind…).</li>
						<li><strong>Mission 12 :</strong> Installation et configuration d’un SGBD et création du site Web de l’organisation (espace inscription/connexion).</li>
						<li><strong>Mission 13 :</strong> Mise en place d'un système de prévention et de détection d’intrusion (SNORT…).</li>
						<li><strong>Mission 14 :</strong> Implémentation d'une solution de chiffrement (SSL/TLS, Bitlocker…).</li>
						<li><strong>Mission 15 :</strong> Mise en place d'une solution de sauvegarde (VEEAM, script…).</li>
						<li><strong>Mission 16 :</strong> Installation d’un logiciel d’analyse de capture de trames (exemples : Wireshark, Tshark, Tcpdump, Suricata).</li>
					</ul>
					<p>
						Ce projet m'a permis de développer des compétences techniques approfondies en administration système, gestion de réseau, et sécurité informatique, tout en renforçant mes capacités de travail en équipe.
					</p>
				</section>

				<!-- Section des projets récents -->
				<section class="recent-projects">
					<h2>Documentation</h2>
					<Grid variant="offset">
						{
							projects.map((project) => (
								<li>
									<PortfolioPreview project={project} />
								</li>
							))
						}
					</Grid>
				</section>
			</main>
			<ContactCTA />
		</div>
	</div>

	<!-- Script pour gérer le mot de passe -->
	<script>
		const correctPassword = "0955"; // Remplacez par votre mot de passe
		const passwordForm = document.getElementById('password-form');
		const content = document.getElementById('content');
		const passwordProtected = document.getElementById('password-protected');

		passwordForm.addEventListener('submit', function(event) {
			event.preventDefault();
			const enteredPassword = document.getElementById('password').value;

			if (enteredPassword === correctPassword) {
				content.classList.remove('hidden');
				passwordProtected.style.display = 'none';
			} else {
				alert('Mot de passe incorrect');
			}
		});
	</script>

	<!-- Styles pour le formulaire et le contenu masqué -->
	<style>
		.password-protected {
			display: flex;
			justify-content: center;
			align-items: center;
			height: 100vh;
			background-color: var(--background);
		}

		.hidden {
			display: none;
		}

		.password-protected form {
			background: var(--background-alt);
			padding: 2rem;
			border-radius: 8px;
			box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
		}

		.password-protected label {
			display: block;
			margin-bottom: 0.5rem;
			color: var(--text);
		}

		.password-protected input {
			width: 100%;
			padding: 0.5rem;
			margin-bottom: 1rem;
			border: 1px solid var(--border);
			border-radius: 4px;
		}

		.password-protected button {
			width: 100%;
			padding: 0.5rem;
			background-color: var(--accent-regular);
			color: var(--text-alt);
			border: none;
			border-radius: 4px;
			cursor: pointer;
		}

		.password-protected button:hover {
			background-color: var(--accent-hover);
		}
	</style>
</BaseLayout>